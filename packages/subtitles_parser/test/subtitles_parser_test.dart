import 'package:flutter_test/flutter_test.dart';
import 'package:subtitles_parser/subtitles_parser.dart';

void main() {
  const rawSubtitles = """
    <transcript><text start="0" dur="4.74">it is June 21st 2023 and you are</text><text start="2.879" dur="3.241">watching the code report the other day I</text><text start="4.74" dur="3.179">was doing some Modern programming by</text><text start="6.12" dur="3.479">having chat gbt do all the work for me</text><text start="7.919" dur="3.421">but it kept complaining that it failed</text><text start="9.599" dur="3.42">to scrape stack Overflow to get the</text><text start="11.34" dur="3.36">latest answers this forced me to go and</text><text start="13.019" dur="3.481">use the actual website like some sort of</text><text start="14.7" dur="3.78">caveman but in doing so I discovered</text><text start="16.5" dur="3.96">that the 2023 stack Overflow survey</text><text start="18.48" dur="3.66">results are in over 90 000 developers</text><text start="20.46" dur="3.659">filled it out and the findings are</text><text start="22.14" dur="3.719">encouraging terrifying and just plain</text><text start="24.119" dur="3.361">weird first up let&amp;#39;s find out if you</text><text start="25.859" dur="3.301">actually need a degree to become a</text><text start="27.48" dur="3.299">professional developer my boot camp told</text><text start="29.16" dur="3.36">me I could make six figures after six</text><text start="30.779" dur="3.601">weeks of JavaScript training but in real</text><text start="32.52" dur="3.48">life it looks like 75 percent of</text><text start="34.38" dur="3.48">professional developers have a degree</text><text start="36" dur="3.239">that&amp;#39;s an overwhelming majority but it&amp;#39;s</text><text start="37.86" dur="2.76">still impressive that a non-trivial</text><text start="39.239" dur="3.061">number of people can get into this field</text><text start="40.62" dur="3">without a degree like you don&amp;#39;t see a</text><text start="42.3" dur="2.88">lot of self-taught brain surgeons</text><text start="43.62" dur="3.3">Landing a job straight out of boot camp</text><text start="45.18" dur="3.24">but in some cases programmers can make</text><text start="46.92" dur="2.58">as much as surgeons you just have to</text><text start="48.42" dur="2.819">learn the right programming language</text><text start="49.5" dur="3.66">according to the survey you definitely</text><text start="51.239" dur="3.48">shouldn&amp;#39;t learn PHP or Dart unless you</text><text start="53.16" dur="3.66">want to be poor you&amp;#39;ll actually make way</text><text start="54.719" dur="3.901">more money as an HTML programmer because</text><text start="56.82" dur="3.6">it&amp;#39;s a far superior programming language</text><text start="58.62" dur="3.84">at the very top of the salary tier</text><text start="60.42" dur="3.299">though we have Zig a modern low-level</text><text start="62.46" dur="3.3">language that I&amp;#39;ll make a video about</text><text start="63.719" dur="3.481">soon but keep in mind this data is a bit</text><text start="65.76" dur="2.88">skewed because there&amp;#39;s only three or</text><text start="67.2" dur="3.419">four paid Zig programmers in the world</text><text start="68.64" dur="3.54">and the same goes for erlang and F sharp</text><text start="70.619" dur="3.241">the highest paid in demand language is</text><text start="72.18" dur="3.119">surprisingly Ruby and almost every</text><text start="73.86" dur="3.78">language on this chart had a salary</text><text start="75.299" dur="3.901">increase of 10 or more from last year</text><text start="77.64" dur="3.119">almost enough to make a dent in the</text><text start="79.2" dur="3.36">Raging inflation that made us all way</text><text start="80.759" dur="3.121">poorer over the last few years a few</text><text start="82.56" dur="3.12">languages though experience salary</text><text start="83.88" dur="4.26">declines and even the highly popular</text><text start="85.68" dur="4.079">rust is down 35 bucks and speaking of</text><text start="88.14" dur="3.72">rest let&amp;#39;s now look at some of the most</text><text start="89.759" dur="3.9">popular Technologies JavaScript is the</text><text start="91.86" dur="3.18">king when it comes to actual usage but</text><text start="93.659" dur="3.241">Which languages do people actually</text><text start="95.04" dur="3.539">admire and desire what you&amp;#39;re looking at</text><text start="96.9" dur="3.539">here is a new chart on the survey that</text><text start="98.579" dur="3.72">replaces the loved and dreaded chart on</text><text start="100.439" dur="3.72">previous stack Overflow surveys when you</text><text start="102.299" dur="3.36">have a red dot far to the right it means</text><text start="104.159" dur="3.121">the language is highly loved by people</text><text start="105.659" dur="3.121">who actually use it when you have a blue</text><text start="107.28" dur="2.94">dot far to the right it means it&amp;#39;s</text><text start="108.78" dur="3.299">highly desired by people who haven&amp;#39;t</text><text start="110.22" dur="4.14">used it or in other words it&amp;#39;s hyped up</text><text start="112.079" dur="3.481">rust is by far the most admired at 85</text><text start="114.36" dur="2.82">percent but there&amp;#39;s been a lot of</text><text start="115.56" dur="3.18">political drama in the rust ecosystem</text><text start="117.18" dur="3.24">recently and it&amp;#39;ll be interesting to see</text><text start="118.74" dur="3.54">if that number declines next year other</text><text start="120.42" dur="3.659">standout languages include Elixir and</text><text start="122.28" dur="4.019">Zig while the most hated languages are</text><text start="124.079" dur="4.141">Matlab and Cobalt of the highly desired</text><text start="126.299" dur="3.24">languages ehp was the least admired</text><text start="128.22" dur="3.06">which is surprising because they give</text><text start="129.539" dur="4.621">out free Lambos when it comes to Cloud</text><text start="131.28" dur="4.5">platforms AWS dominates but hetzner a</text><text start="134.16" dur="3.06">German company is the most admired</text><text start="135.78" dur="3.48">what&amp;#39;s interesting though is that people</text><text start="137.22" dur="3.48">now absolutely hate Heroku I think the</text><text start="139.26" dur="3">lesson to be learned here is to never</text><text start="140.7" dur="3.48">get rid of your free tier when it comes</text><text start="142.26" dur="3.66">to JavaScript Frameworks react gets most</text><text start="144.18" dur="3.6">of the action but svelte is the most</text><text start="145.92" dur="3.42">beautiful I Concur and if you want to</text><text start="147.78" dur="3.48">learn svelte my full course will be out</text><text start="149.34" dur="3.36">next week for fireship pro members it&amp;#39;s</text><text start="151.26" dur="3.3">also worth pointing out that newer</text><text start="152.7" dur="3.539">Frameworks like quick and solid are also</text><text start="154.56" dur="4.2">highly admired when it comes to full</text><text start="156.239" dur="4.321">stack meta Frameworks nexjs is dominant</text><text start="158.76" dur="3.24">but currently people on Tech Twitter are</text><text start="160.56" dur="3">revolting against the app directory</text><text start="162" dur="3.06">which might affect its ranking next year</text><text start="163.56" dur="3.12">I don&amp;#39;t think it&amp;#39;ll get anywhere near as</text><text start="165.06" dur="3.06">bad as Gatsby though which is still very</text><text start="166.68" dur="3.3">much hated even though it was acquired</text><text start="168.12" dur="3.66">by netlify last year when it comes to</text><text start="169.98" dur="3.6">non-javascript Frameworks Phoenix which</text><text start="171.78" dur="3.78">is based on the Elixir language is well</text><text start="173.58" dur="3.9">above everything else now in other tools</text><text start="175.56" dur="4.02">the mobile app framework Towery which is</text><text start="177.48" dur="3.839">based on rust is by far the most admired</text><text start="179.58" dur="3.48">but flutter is the most desired mobile</text><text start="181.319" dur="4.081">app framework even more so than react</text><text start="183.06" dur="4.56">native now moving on to Ides the S code</text><text start="185.4" dur="3.839">dominates our desires but neovim is the</text><text start="187.62" dur="2.88">most admired and it&amp;#39;s a great editor if</text><text start="189.239" dur="2.881">you&amp;#39;d love to configure things so you</text><text start="190.5" dur="3.18">never have to actually build anything it</text><text start="192.12" dur="2.699">doesn&amp;#39;t matter though because AI will</text><text start="193.68" dur="3.54">soon be doing all the building anyway</text><text start="194.819" dur="4.861">chat EPT is the most admired and desired</text><text start="197.22" dur="4.14">llm and same goes for GitHub co-pilot</text><text start="199.68" dur="4.08">which itself is based on the same models</text><text start="201.36" dur="4.019">as chat EPT but surprisingly nearly 30</text><text start="203.76" dur="3.66">percent of developers plan on never</text><text start="205.379" dur="3.961">using AI at all and another crazy stat</text><text start="207.42" dur="3.899">is that only 16 percent of people now</text><text start="209.34" dur="3.78">work in person full-time almost everyone</text><text start="211.319" dur="3.361">is either remote or hybrid remote</text><text start="213.12" dur="3">despite all the Articles you read about</text><text start="214.68" dur="3.059">people being called back to the office</text><text start="216.12" dur="3.119">okay so that was a lot of data to</text><text start="217.739" dur="3.301">process but I want to finish off with a</text><text start="219.239" dur="3.601">piece of data that reveals the secret to</text><text start="221.04" dur="3.9">making more money as a programmer a full</text><text start="222.84" dur="4.86">stack developer in India makes about 17K</text><text start="224.94" dur="5.04">per year in Germany it goes up to 69k in</text><text start="227.7" dur="4.319">the UK it goes up to 74k in Canada</text><text start="229.98" dur="4.02">you&amp;#39;re looking at 81k but in the United</text><text start="232.019" dur="4.261">States of America it almost doubles to</text><text start="234" dur="4.019">140k if you want to make more money just</text><text start="236.28" dur="3.239">respawn in America next time this has</text><text start="238.019" dur="5.121">been the code report thanks for watching</text><text start="239.519" dur="3.621">and I will see you in the next one</text></transcript>
  """;

  test('Parsing subtitles should return a non-empty list', () {
    final subtitles = parseSubtitles(rawSubtitles);
    expect(subtitles, isNotEmpty);
  });

  test('Parsed subtitles should have correct start and end durations', () {
    final subtitles = parseSubtitles(rawSubtitles);

    for (int i = 0; i < subtitles.length - 1; i++) {
      expect(subtitles[i].start, lessThanOrEqualTo(subtitles[i].end));
      expect(subtitles[i].end, lessThanOrEqualTo(subtitles[i + 1].start));
    }
  });

  test('Parsed subtitles should have non-empty text', () {
    final subtitles = parseSubtitles(rawSubtitles);
    expect(subtitles.every((subtitle) => subtitle.text.isNotEmpty), isTrue);
  });
}
