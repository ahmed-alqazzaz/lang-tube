import 'dart:developer';

import 'package:flutter/material.dart';
import 'dart:async';
import 'package:subtitles_parser/subtitles_parser.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatefulWidget {
  const MyApp({super.key});

  @override
  State<MyApp> createState() => _MyAppState();
}

class _MyAppState extends State<MyApp> {
  late Future<List<ParsedSubtitle>> sumAsyncResult;

  @override
  void initState() {
    super.initState();
    sumAsyncResult = parseSubtitles(marinaSubtitles);
  }

  @override
  Widget build(BuildContext context) {
    const textStyle = TextStyle(fontSize: 25);
    const spacerSmall = SizedBox(height: 10);
    return MaterialApp(
      home: Scaffold(
        appBar: AppBar(
          title: const Text('Native Packages'),
        ),
        body: SingleChildScrollView(
          child: Container(
            padding: const EdgeInsets.all(10),
            child: Column(
              children: [
                const Text(
                  'This calls a native function through FFI that is shipped as source in the package. '
                  'The native code is built as part of the Flutter Runner build.',
                  style: textStyle,
                  textAlign: TextAlign.center,
                ),
                spacerSmall,
                Text(
                  "",
                  style: textStyle,
                  textAlign: TextAlign.center,
                ),
                spacerSmall,
                FutureBuilder<List<ParsedSubtitle>>(
                  future: sumAsyncResult,
                  builder: (BuildContext context, AsyncSnapshot value) {
                    final displayValue =
                        (value.hasData) ? value.data : 'loading';
                    log(value.error.toString());
                    return Text(
                      'await sumAsync(3, 4) = $displayValue',
                      style: textStyle,
                      textAlign: TextAlign.center,
                    );
                  },
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

const marinaSubtitles = """
  <transcript><text start="0" dur="6">hey guys welcome back to lingo Marina a</text><text start="3.24" dur="4.32">channel where I share my journey of</text><text start="6" dur="3.2">learning English with you and today</text><text start="7.56" dur="5.22">we&amp;#39;re going to talk about pronunciation</text><text start="9.2" dur="7.24">something that has been evolving like</text><text start="12.78" dur="7.44">crazy just take a quick look at a video</text><text start="16.44" dur="6.06">that I made seven years ago and this was</text><text start="20.22" dur="3.6">a great experience for me because I</text><text start="22.5" dur="4.08">wanted to enter United States</text><text start="23.82" dur="6.36">universities and many of them required</text><text start="26.58" dur="6.54">around 100 or around 90. so I was well</text><text start="30.18" dur="4.32">above the grade I needed oh my God who</text><text start="33.12" dur="3.599">is that person</text><text start="34.5" dur="4.02">why does she sound like a different</text><text start="36.719" dur="4.141">person and this is what&amp;#39;s going to</text><text start="38.52" dur="4.5">happen to you when you embark on a</text><text start="40.86" dur="5.1">journey of improving your pronunciation</text><text start="43.02" dur="5.16">and the thing is if you start living in</text><text start="45.96" dur="6.18">an English-speaking environment after</text><text start="48.18" dur="6.84">you&amp;#39;re 25 which in my case was the case</text><text start="52.14" dur="6.48">I moved to the us at the age of 25.</text><text start="55.02" dur="5.46">I am 100 sure that even in 40 years I</text><text start="58.62" dur="5.34">will still sound a little bit Russian</text><text start="60.48" dur="6.06">because if you are seven and you move to</text><text start="63.96" dur="4.44">a new country your accent goes away</text><text start="66.54" dur="3.54">because this is how a brain works there</text><text start="68.4" dur="4.14">is more plasticity</text><text start="70.08" dur="4.92">when you&amp;#39;re 25 you have your whole</text><text start="72.54" dur="4.5">history in another country you know you</text><text start="75" dur="5.46">work on your accent and yes you see it</text><text start="77.04" dur="6.3">improves like compare me right now to</text><text start="80.46" dur="5.28">Marina from 2016.</text><text start="83.34" dur="4.56">two different people right so I hope</text><text start="85.74" dur="3.419">this encourages you to work on your</text><text start="87.9" dur="3.66">pronunciation we&amp;#39;re going to talk about</text><text start="89.159" dur="4.561">some things that you can improve right</text><text start="91.56" dur="5.22">now but believe me it&amp;#39;s a never-ending</text><text start="93.72" dur="6.48">process and this is why I love it I</text><text start="96.78" dur="5.28">honestly enjoy my constant progress and</text><text start="100.2" dur="5.34">most of all I enjoy sharing it with you</text><text start="102.06" dur="5.22">so let&amp;#39;s talk about some things that you</text><text start="105.54" dur="3.6">could take away with you after watching</text><text start="107.28" dur="4.58">this video now let&amp;#39;s start with my</text><text start="109.14" dur="6.839">favorite V sound versus</text><text start="111.86" dur="7.18">sound in some languages like mine</text><text start="115.979" dur="5.28">Russian there is no sound so when</text><text start="119.04" dur="5.219">somebody tries to mimic Russian accent I</text><text start="121.259" dur="5.341">will call you very soon see what I&amp;#39;m</text><text start="124.259" dur="7.861">doing I&amp;#39;m not saying well I will call</text><text start="126.6" dur="10.7">you wait for it see when I try to do my</text><text start="132.12" dur="5.18">full Russian accent I actually replace</text><text start="137.819" dur="4.981">and this is what I used to do</text><text start="140.22" dur="5.34">10 years ago 20 years ago five years ago</text><text start="142.8" dur="4.62">it still slips sometimes the thing is</text><text start="145.56" dur="6">there is a very clear difference between</text><text start="147.42" dur="5.88">these two sounds let&amp;#39;s compare went</text><text start="151.56" dur="5.58">vent</text><text start="153.3" dur="6.12">like one sound changes the whole meaning</text><text start="157.14" dur="3.599">of the word my monkey took that</text><text start="159.42" dur="3.48">paintbrush and then went into that vent</text><text start="160.739" dur="4.441">Wayne</text><text start="162.9" dur="4.919">vain</text><text start="165.18" dur="4.559">see different words yeah there&amp;#39;s also a</text><text start="167.819" dur="3.901">polite less vain way to say thank you</text><text start="169.739" dur="3.421">when someone compliments your film of</text><text start="171.72" dur="4.379">course when you talk to a native speaker</text><text start="173.16" dur="4.74">and they hear the whole context</text><text start="176.099" dur="3.241">they&amp;#39;re not gonna tell you like oh my</text><text start="177.9" dur="2.64">God what did you mean there I didn&amp;#39;t</text><text start="179.34" dur="2.58">understand this word of course they&amp;#39;re</text><text start="180.54" dur="4.5">gonna understand</text><text start="181.92" dur="5.7">it&amp;#39;s just the way you get over this is</text><text start="185.04" dur="4.68">you start paying attention</text><text start="187.62" dur="4.38">ideally you start recording yourself and</text><text start="189.72" dur="4.799">re-watching your videos because when</text><text start="192" dur="5.04">we&amp;#39;re talking we sometimes miss things</text><text start="194.519" dur="4.86">so what really helps me is we&amp;#39;re</text><text start="197.04" dur="5.479">watching my older videos but anyways</text><text start="199.379" dur="3.14">let&amp;#39;s practice together</text><text start="203.599" dur="5.801">water do you want some</text><text start="206.76" dur="6.96">some water or some tea without warning</text><text start="209.4" dur="6.96">no but event</text><text start="213.72" dur="4.799">ventilator</text><text start="216.36" dur="5.459">very egg</text><text start="218.519" dur="5.461">I am sure you are a very vibrant and</text><text start="221.819" dur="4.861">dynamic lover when you want to be so the</text><text start="223.98" dur="5.339">way to do it exaggerate it whenever you</text><text start="226.68" dur="4.619">are doing something for yourself talking</text><text start="229.319" dur="4.801">to yourself talking to your phone</text><text start="231.299" dur="4.741">talking to your camera exaggerate this</text><text start="234.12" dur="4.02">way you will activate your muscle memory</text><text start="236.04" dur="6">and it&amp;#39;s going to be easier for you now</text><text start="238.14" dur="6.92">I started singing and uh when we sing my</text><text start="242.04" dur="6.54">vocal coach asks me to exaggerate things</text><text start="245.06" dur="6.399">all the time because this way this is</text><text start="248.58" dur="5.46">how we work on my rhythm he asks me to</text><text start="251.459" dur="5.161">sing a song 2x faster so that it&amp;#39;s</text><text start="254.04" dur="5.28">easier for me to catch the beat when we</text><text start="256.62" dur="7.519">switch the normal speed on right so my</text><text start="259.32" dur="9.24">tip here exaggerate very weight water</text><text start="264.139" dur="6.28">will vary wait and like practice and</text><text start="268.56" dur="4.44">practice and practice</text><text start="270.419" dur="5.941">practice makes perfect pronunciation</text><text start="273" dur="5.28">really depends on your mother tongue and</text><text start="276.36" dur="5.52">your teacher</text><text start="278.28" dur="6.479">one of my key teachers was my friend</text><text start="281.88" dur="4.94">venipak he still teaches me all the time</text><text start="284.759" dur="5.22">he still helps me with my pronunciation</text><text start="286.82" dur="4.84">and I can say that he&amp;#39;s one of the most</text><text start="289.979" dur="4.381">inspiring teachers in the world because</text><text start="291.66" dur="4.979">he came to the us at the age of 20 and</text><text start="294.36" dur="5.76">now he&amp;#39;s on American radio he&amp;#39;s singing</text><text start="296.639" dur="5.34">in English his accent for me like I</text><text start="300.12" dur="3.54">can&amp;#39;t even tell that he&amp;#39;s a non-native</text><text start="301.979" dur="3.78">speaker he might have a slight accent</text><text start="303.66" dur="4.02">but I can&amp;#39;t even tell right and for me</text><text start="305.759" dur="3.72">he&amp;#39;s a huge inspiration and he makes me</text><text start="307.68" dur="3.84">believe that everything is possible my</text><text start="309.479" dur="4.981">company lingua trip partnered with benia</text><text start="311.52" dur="5.34">and several native speakers to help you</text><text start="314.46" dur="4.08">improve your pronunciation as we know</text><text start="316.86" dur="4.8">the best way to improve your English and</text><text start="318.54" dur="4.98">pronunciation is to immerse yourself in</text><text start="321.66" dur="4.68">an English-speaking environment which is</text><text start="323.52" dur="4.739">not always possible right but we tried</text><text start="326.34" dur="3.72">to create a similar experience for you</text><text start="328.259" dur="4.681">at lingua school which is our new</text><text start="330.06" dur="5.699">product so when you start studying there</text><text start="332.94" dur="4.68">we assess your pronunciation and based</text><text start="335.759" dur="3.601">on that we create a study plan for you</text><text start="337.62" dur="4.62">where you&amp;#39;re in a act with a native</text><text start="339.36" dur="4.38">speaking teacher twice a week and get</text><text start="342.24" dur="4.08">feedback on your accent and</text><text start="343.74" dur="4.5">pronunciation in these classes you get</text><text start="346.32" dur="4.14">your homework and you get feedback from</text><text start="348.24" dur="4.08">your Mentor regarding how your</text><text start="350.46" dur="4.739">pronunciation is improving and what&amp;#39;s</text><text start="352.32" dur="4.92">happening to it also there is a speaking</text><text start="355.199" dur="3.181">club that you can attend to immerse</text><text start="357.24" dur="3.6">yourself in the English-speaking</text><text start="358.38" dur="4.98">environment and surround yourself by</text><text start="360.84" dur="4.44">like-minded people who are learning how</text><text start="363.36" dur="3.899">to sound more American and of course you</text><text start="365.28" dur="5.759">can choose whatever accent you want to</text><text start="367.259" dur="5.041">choose and uh an America is a country of</text><text start="371.039" dur="3.481">immigrants</text><text start="372.3" dur="4.92">there is so many accents here and so</text><text start="374.52" dur="4.2">many dialect which is amazing and I want</text><text start="377.22" dur="3.419">you to choose</text><text start="378.72" dur="4.38">who you want to sound like what you want</text><text start="380.639" dur="4.68">to sound like and start that Journey now</text><text start="383.1" dur="3.9">check out the link down below join our</text><text start="385.319" dur="3.72">International Community of students</text><text start="387" dur="3.84">surround yourself by like-minded people</text><text start="389.039" dur="4.5">meet people from all over the world</text><text start="390.84" dur="5.699">practice English with fellow students</text><text start="393.539" dur="4.5">and native speaking teachers join lingua</text><text start="396.539" dur="3.121">school and surround yourself with</text><text start="398.039" dur="4.081">English the link is in the description</text><text start="399.66" dur="4.5">okay the next sound that is super</text><text start="402.12" dur="5.4">confusing because</text><text start="404.16" dur="7.14">like double O okay I know the word food</text><text start="407.52" dur="6.36">and we pronounce it as Ooh food so why</text><text start="411.3" dur="4.92">not pronounce it the same way in every</text><text start="413.88" dur="4.379">single word well no no no this is not</text><text start="416.22" dur="4.64">how English works and let me tell you a</text><text start="418.259" dur="5.22">story I&amp;#39;m all about storytelling so 2015</text><text start="420.86" dur="4.42">uh I am pitching lingua trip to</text><text start="423.479" dur="5.34">investors our company and my</text><text start="425.28" dur="7.08">presentation starts with a phrase where</text><text start="428.819" dur="7.981">I communicate that you do not learn a</text><text start="432.36" dur="7.02">language just by reading a book A book</text><text start="436.8" dur="5.459">but by traveling right by immersing</text><text start="439.38" dur="6.78">yourself into it but I said a book book</text><text start="442.259" dur="6.301">the way I would say food longer ooh and</text><text start="446.16" dur="3.72">uh one of the guys who was helping me</text><text start="448.56" dur="3.96">with the pitch</text><text start="449.88" dur="4.319">he never corrected me but he started</text><text start="452.52" dur="3.06">saying this phrase over and over again</text><text start="454.199" dur="3.961">just to</text><text start="455.58" dur="4.98">um help me with pacing Etc and I started</text><text start="458.16" dur="3.96">noticing that he pronounced book in a</text><text start="460.56" dur="3.24">completely different way he said book</text><text start="462.12" dur="3.6">and he had this I think he&amp;#39;s from</text><text start="463.8" dur="4.619">California so</text><text start="465.72" dur="5.819">he said it really distinctively and I</text><text start="468.419" dur="5.881">started thinking okay now how do I know</text><text start="471.539" dur="4.981">when it&amp;#39;s a book and not a book</text><text start="474.3" dur="3.78">well you just learn it so this is what</text><text start="476.52" dur="5.22">I&amp;#39;m gonna tell you</text><text start="478.08" dur="5.94">um double O can be pronounced in several</text><text start="481.74" dur="3.959">ways food</text><text start="484.02" dur="5.119">Moon</text><text start="485.699" dur="5.22">you say ooh right or</text><text start="489.139" dur="5.861">grooming</text><text start="490.919" dur="6">Loop boom now just Loop it around but</text><text start="495" dur="3.9">instead of pulling it tight thread the</text><text start="496.919" dur="4.021">needle through the loop and then you&amp;#39;re</text><text start="498.9" dur="5.579">done because there&amp;#39;s no actual food on</text><text start="500.94" dur="6.36">this menu let&amp;#39;s go these words you say</text><text start="504.479" dur="4.62">and I like I always ask quora quora is</text><text start="507.3" dur="3.06">by the way one of the best websites if</text><text start="509.099" dur="3.18">you have any questions regarding</text><text start="510.36" dur="4.739">pronunciation you just go there there&amp;#39;s</text><text start="512.279" dur="5.101">a question why do we say food but we say</text><text start="515.099" dur="5.221">foot like a completely different sound</text><text start="517.38" dur="5.76">why is it that way and basically the</text><text start="520.32" dur="5.519">answer is because because this is the</text><text start="523.14" dur="6.9">way English language works so now let&amp;#39;s</text><text start="525.839" dur="5.461">look at another set of words book</text><text start="530.04" dur="2.64">cook</text><text start="531.3" dur="4.86">look</text><text start="532.68" dur="5.58">so it&amp;#39;s not look it&amp;#39;s look exaggerated</text><text start="536.16" dur="4.739">again that&amp;#39;s the only way I started</text><text start="538.26" dur="4.56">saying buck buck to learn it because I</text><text start="540.899" dur="4.44">wanted to sound more American during my</text><text start="542.82" dur="4.62">presentation so I was exaggerating it</text><text start="545.339" dur="6.781">all the time my husband was laughing at</text><text start="547.44" dur="7.14">me look not book book what children&amp;#39;s</text><text start="552.12" dur="4.94">books no not children&amp;#39;s books real books</text><text start="554.58" dur="5.1">Good Foot</text><text start="557.06" dur="4.24">listen I took care of the docket but I&amp;#39;d</text><text start="559.68" dur="4.26">appreciate it if you keep me in the loop</text><text start="561.3" dur="5.099">when you have outside commitments now of</text><text start="563.94" dur="5.04">course that&amp;#39;s not it English has more</text><text start="566.399" dur="6.021">surprises for you there is uh there is a</text><text start="568.98" dur="6.84">word flood where a double O is suddenly</text><text start="572.42" dur="5.2">a flood and it can go on and on with</text><text start="575.82" dur="4.26">double o&amp;#39;s because there are also words</text><text start="577.62" dur="4.86">like door and floor Etc but what I</text><text start="580.08" dur="5.34">really wanted you to catch here is what</text><text start="582.48" dur="4.979">I caught back in 2015 that it&amp;#39;s not a</text><text start="585.42" dur="3.84">book it&amp;#39;s a book if you have any</text><text start="587.459" dur="5.341">questions about how to pronounce a word</text><text start="589.26" dur="6.06">my go-to strategies I Google it flood</text><text start="592.8" dur="5.159">pronunciation and I repeat after Google</text><text start="595.32" dur="5.1">or I watch a YouTube video</text><text start="597.959" dur="4.44">welcome to learning English alright</text><text start="600.42" dur="3.599">thank you guys so much for watching this</text><text start="602.399" dur="3.361">video up to the very end I have a</text><text start="604.019" dur="4.141">question for you what are you struggling</text><text start="605.76" dur="4.019">to pronounce which words are the hardest</text><text start="608.16" dur="3.06">for you to pronounce comment down below</text><text start="609.779" dur="2.881">I am looking forward to reading your</text><text start="611.22" dur="3.36">comments and of course share this video</text><text start="612.66" dur="4.98">subscribe this Channel and I&amp;#39;ll see you</text><text start="614.58" dur="6.9">very soon in my next videos thank you so</text><text start="617.64" dur="3.84">much and bye</text></transcript>
""";
